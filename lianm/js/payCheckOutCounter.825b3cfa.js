(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["payCheckOutCounter"],{"3e0f":function(e,t,a){"use strict";function n(e){const t="paycenter/decodeparams";return ajax({url:t,method:"post",data:e,catchError:!0})}function r(e){const t="paycenter/topay";return ajax({url:t,method:"post",data:e,catchError:!0})}function o(e){const t="paycenter/getPayResult";return ajax({url:t,method:"post",data:e,catchError:!0})}a.d(t,"a",function(){return n}),a.d(t,"c",function(){return r}),a.d(t,"b",function(){return o})},"73cb":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"lm-container",attrs:{id:"pay-check-out-counter"}},[a("lm-header",[a("div",{staticClass:"head-left",attrs:{slot:"left"},slot:"left"},[e._v("收银台")])]),a("lm-scroll",{ref:"wrapper",attrs:{pullup:!0}},[a("div",{staticClass:"check-out-inner-scroll"},[a("pay-check-out-counter-result",{attrs:{"pay-info":e.payInfo}}),a("pay-check-out-counter-way",{on:{wxToPay:e.wxToPay}})],1)]),a("transition",{attrs:{"enter-active-class":e.$route.meta.pageIn,"leave-active-class":e.$route.meta.pageOut}},[a("router-view")],1)],1)},r=[],o=a("3e0f");const c=e=>a.e("chunk-4c7d6adb").then(function(){var t=[a("9335")];e.apply(null,t)}.bind(this)).catch(a.oe),i=e=>Promise.all([a.e("chunk-2d230a62"),a.e("chunk-7eedab92")]).then(function(){var t=[a("1ff0")];e.apply(null,t)}.bind(this)).catch(a.oe),s=e=>a.e("chunk-f6ed2224").then(function(){var t=[a("92d8")];e.apply(null,t)}.bind(this)).catch(a.oe),d=e=>a.e("chunk-df1816dc").then(function(){var t=[a("ae2d")];e.apply(null,t)}.bind(this)).catch(a.oe);var p={name:"PayCheckOutCounter",components:{PayCheckOutCounterWay:d,PayCheckOutCounterResult:s,LmScroll:i,LmHeader:c},data(){return{payInfo:{},payType:"",openId:""}},mounted(){this.decodeParams(),this.judgeBrowser()},methods:{getUrlParams(e){let t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)"),a=window.location.search.substr(1).match(t);return null!=a?decodeURIComponent(a[2]):null},decodeParams(){Object(o["a"])({param:this.getUrlParams("param")}).then(e=>{this.payInfo=e.data})},judgeBrowser(){let e=window.navigator.userAgent.toLowerCase();"micromessenger"==e.match(/MicroMessenger/i)?(this.payType="PT00",this.getUrlParams("openid")?this.openId=this.getUrlParams("openid"):window.location.href="http://nmg10010.cn/Wxapi/weixin/api/getopenidwithparam.jsp?appid=wx83643761e4cddf19&redirectcode=lmpayuser&m=getopenid&param="+this.getUrlParams("param")):this.payType="PT01",console.log(this.payType)},wxToPay(){const e=this,t={param:this.getUrlParams("param"),paytype:this.payType,openid:this.openId};Object(o["c"])(t).then(t=>{if("PT00"===e.payType){const e=t.data.timeStamp,a=t.data.nonceStr,n=t.data.package,r=t.data.signType,o=t.data.paySign,c=t.data.appId,i=t.data.shopnumber;"undefined"==typeof WeixinJSBridge?document.addEventListener?document.addEventListener("WeixinJSBridgeReady",this.onBridgeReady,!1):document.attachEvent&&(document.attachEvent("WeixinJSBridgeReady",this.onBridgeReady),document.attachEvent("onWeixinJSBridgeReady",this.onBridgeReady)):this.onBridgeReady(e,a,n,r,o,c,i)}else"PT01"===e.payType&&(window.location.href=t.data.mweb_url)})},onBridgeReady(e,t,a,n,r,o,c){WeixinJSBridge.invoke("getBrandWCPayRequest",{appId:o,timeStamp:e,nonceStr:t,package:a,signType:n,paySign:r},function(e){"get_brand_wcpay_request:ok"==e.err_msg&&setTimeout(function(){window.location.href="http://ruiyao.ngrok2.xiaomiqiu.cn/pay/result?paysn="+c},5e3)})}}},u=p,l=(a("c862"),a("17cc")),h=Object(l["a"])(u,n,r,!1,null,"5195b48f",null);t["default"]=h.exports},a758:function(e,t,a){var n=a("fbc1");"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var r=a("85cb").default;r("715e09fd",n,!0,{sourceMap:!1,shadowMode:!1})},c862:function(e,t,a){"use strict";var n=a("a758"),r=a.n(n);r.a},fbc1:function(e,t,a){t=e.exports=a("690e")(!1),t.push([e.i,"#pay-check-out-counter[data-v-5195b48f]{width:10rem;background:#fff}#pay-check-out-counter .head-left[data-v-5195b48f]{line-height:.4rem;margin-left:.266667rem}#pay-check-out-counter .check-out-inner-scroll[data-v-5195b48f]{margin-top:-.266667rem}",""])}}]);